local Library = {}
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

function Library:Create(title)
    local UI = {}
    
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "SimpleUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game:GetService("CoreGui")
    
    local Main = Instance.new("Frame")
    Main.Size = UDim2.new(0, 600, 0, 400)
    Main.Position = UDim2.new(0.5, -300, 0.5, -200)
    Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    Main.BorderSizePixel = 0
    Main.Parent = ScreenGui
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 8)
    Corner.Parent = Main
    
    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 40)
    TopBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TopBar.BorderSizePixel = 0
    TopBar.Parent = Main
    
    local TopCorner = Instance.new("UICorner")
    TopCorner.CornerRadius = UDim.new(0, 8)
    TopCorner.Parent = TopBar
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, -50, 1, 0)
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = title
    Title.TextColor3 = Color3.new(1, 1, 1)
    Title.TextSize = 16
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TopBar
    
    local Close = Instance.new("TextButton")
    Close.Size = UDim2.new(0, 30, 0, 30)
    Close.Position = UDim2.new(1, -35, 0, 5)
    Close.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    Close.Text = "X"
    Close.TextColor3 = Color3.new(1, 1, 1)
    Close.TextSize = 14
    Close.Font = Enum.Font.GothamBold
    Close.Parent = TopBar
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 6)
    CloseCorner.Parent = Close
    
    Close.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    local Container = Instance.new("Frame")
    Container.Size = UDim2.new(1, -20, 1, -60)
    Container.Position = UDim2.new(0, 10, 0, 50)
    Container.BackgroundTransparency = 1
    Container.Parent = Main
    
    local LeftColumn = Instance.new("Frame")
    LeftColumn.Size = UDim2.new(0.48, 0, 1, 0)
    LeftColumn.Position = UDim2.new(0, 0, 0, 0)
    LeftColumn.BackgroundTransparency = 1
    LeftColumn.Parent = Container
    
    local LeftList = Instance.new("UIListLayout")
    LeftList.Padding = UDim.new(0, 8)
    LeftList.SortOrder = Enum.SortOrder.LayoutOrder
    LeftList.Parent = LeftColumn
    
    local RightColumn = Instance.new("Frame")
    RightColumn.Size = UDim2.new(0.48, 0, 1, 0)
    RightColumn.Position = UDim2.new(0.52, 0, 0, 0)
    RightColumn.BackgroundTransparency = 1
    RightColumn.Parent = Container
    
    local RightList = Instance.new("UIListLayout")
    RightList.Padding = UDim.new(0, 8)
    RightList.SortOrder = Enum.SortOrder.LayoutOrder
    RightList.Parent = RightColumn
    
    local Dragging, DragStart, StartPos
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Dragging = true
            DragStart = input.Position
            StartPos = Main.Position
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if Dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local Delta = input.Position - DragStart
            Main.Position = UDim2.new(StartPos.X.Scale, StartPos.X.Offset + Delta.X, StartPos.Y.Scale, StartPos.Y.Offset + Delta.Y)
        end
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Dragging = false
        end
    end)
    
    function UI:Section(name, side)
        local Section = {}
        local Parent = side == "right" and RightColumn or LeftColumn
        
        local SectionFrame = Instance.new("Frame")
        SectionFrame.Size = UDim2.new(1, 0, 0, 35)
        SectionFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        SectionFrame.BorderSizePixel = 0
        SectionFrame.Parent = Parent
        
        local SectionCorner = Instance.new("UICorner")
        SectionCorner.CornerRadius = UDim.new(0, 6)
        SectionCorner.Parent = SectionFrame
        
        local SectionTitle = Instance.new("TextLabel")
        SectionTitle.Size = UDim2.new(1, -20, 1, 0)
        SectionTitle.Position = UDim2.new(0, 10, 0, 0)
        SectionTitle.BackgroundTransparency = 1
        SectionTitle.Text = name
        SectionTitle.TextColor3 = Color3.new(1, 1, 1)
        SectionTitle.TextSize = 14
        SectionTitle.Font = Enum.Font.GothamBold
        SectionTitle.TextXAlignment = Enum.TextXAlignment.Left
        SectionTitle.Parent = SectionFrame
        
        local Content = Instance.new("Frame")
        Content.Size = UDim2.new(1, 0, 0, 0)
        Content.Position = UDim2.new(0, 0, 0, 35)
        Content.BackgroundTransparency = 1
        Content.Parent = SectionFrame
        
        local ContentList = Instance.new("UIListLayout")
        ContentList.Padding = UDim.new(0, 5)
        ContentList.Parent = Content
        
        ContentList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Content.Size = UDim2.new(1, 0, 0, ContentList.AbsoluteContentSize.Y)
            SectionFrame.Size = UDim2.new(1, 0, 0, 35 + ContentList.AbsoluteContentSize.Y + 10)
        end)
        
        function Section:Toggle(name, default, callback)
            local Toggled = default or false
            
            local ToggleFrame = Instance.new("Frame")
            ToggleFrame.Size = UDim2.new(1, -10, 0, 30)
            ToggleFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            ToggleFrame.BorderSizePixel = 0
            ToggleFrame.Parent = Content
            
            local ToggleCorner = Instance.new("UICorner")
            ToggleCorner.CornerRadius = UDim.new(0, 4)
            ToggleCorner.Parent = ToggleFrame
            
            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(1, -50, 1, 0)
            Label.Position = UDim2.new(0, 10, 0, 0)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.new(1, 1, 1)
            Label.TextSize = 12
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = ToggleFrame
            
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(0, 35, 0, 18)
            Button.Position = UDim2.new(1, -40, 0.5, -9)
            Button.BackgroundColor3 = Toggled and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)
            Button.Text = ""
            Button.Parent = ToggleFrame
            
            local ButtonCorner = Instance.new("UICorner")
            ButtonCorner.CornerRadius = UDim.new(1, 0)
            ButtonCorner.Parent = Button
            
            local Circle = Instance.new("Frame")
            Circle.Size = UDim2.new(0, 14, 0, 14)
            Circle.Position = Toggled and UDim2.new(1, -16, 0.5, -7) or UDim2.new(0, 2, 0.5, -7)
            Circle.BackgroundColor3 = Color3.new(1, 1, 1)
            Circle.BorderSizePixel = 0
            Circle.Parent = Button
            
            local CircleCorner = Instance.new("UICorner")
            CircleCorner.CornerRadius = UDim.new(1, 0)
            CircleCorner.Parent = Circle
            
            Button.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = Toggled and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)}):Play()
                TweenService:Create(Circle, TweenInfo.new(0.2), {Position = Toggled and UDim2.new(1, -16, 0.5, -7) or UDim2.new(0, 2, 0.5, -7)}):Play()
                callback(Toggled)
            end)
            
            if Toggled then callback(true) end
        end
        
        function Section:Slider(name, min, max, default, callback)
            local Value = default or min
            
            local SliderFrame = Instance.new("Frame")
            SliderFrame.Size = UDim2.new(1, -10, 0, 45)
            SliderFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            SliderFrame.BorderSizePixel = 0
            SliderFrame.Parent = Content
            
            local SliderCorner = Instance.new("UICorner")
            SliderCorner.CornerRadius = UDim.new(0, 4)
            SliderCorner.Parent = SliderFrame
            
            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(1, -20, 0, 20)
            Label.Position = UDim2.new(0, 10, 0, 5)
            Label.BackgroundTransparency = 1
            Label.Text = name .. ": " .. Value
            Label.TextColor3 = Color3.new(1, 1, 1)
            Label.TextSize = 12
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = SliderFrame
            
            local Track = Instance.new("Frame")
            Track.Size = UDim2.new(1, -20, 0, 4)
            Track.Position = UDim2.new(0, 10, 1, -12)
            Track.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            Track.BorderSizePixel = 0
            Track.Parent = SliderFrame
            
            local TrackCorner = Instance.new("UICorner")
            TrackCorner.CornerRadius = UDim.new(1, 0)
            TrackCorner.Parent = Track
            
            local Fill = Instance.new("Frame")
            Fill.Size = UDim2.new((Value - min) / (max - min), 0, 1, 0)
            Fill.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
            Fill.BorderSizePixel = 0
            Fill.Parent = Track
            
            local FillCorner = Instance.new("UICorner")
            FillCorner.CornerRadius = UDim.new(1, 0)
            FillCorner.Parent = Fill
            
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, 0, 1, 0)
            Button.BackgroundTransparency = 1
            Button.Text = ""
            Button.Parent = Track
            
            local Dragging = false
            Button.MouseButton1Down:Connect(function() Dragging = true end)
            UIS.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then Dragging = false end
            end)
            
            game:GetService("RunService").RenderStepped:Connect(function()
                if Dragging then
                    local Mouse = game:GetService("Players").LocalPlayer:GetMouse()
                    local Percent = math.clamp((Mouse.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
                    Value = math.floor(min + (max - min) * Percent * 10) / 10
                    Fill.Size = UDim2.new(Percent, 0, 1, 0)
                    Label.Text = name .. ": " .. Value
                    callback(Value)
                end
            end)
            
            callback(Value)
        end
        
        function Section:Button(name, callback)
            local ButtonFrame = Instance.new("TextButton")
            ButtonFrame.Size = UDim2.new(1, -10, 0, 30)
            ButtonFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            ButtonFrame.Text = name
            ButtonFrame.TextColor3 = Color3.new(1, 1, 1)
            ButtonFrame.TextSize = 12
            ButtonFrame.Font = Enum.Font.Gotham
            ButtonFrame.BorderSizePixel = 0
            ButtonFrame.Parent = Content
            
            local ButtonCorner = Instance.new("UICorner")
            ButtonCorner.CornerRadius = UDim.new(0, 4)
            ButtonCorner.Parent = ButtonFrame
            
            ButtonFrame.MouseButton1Click:Connect(callback)
        end
        
        return Section
    end
    
    return UI
end

return Library
