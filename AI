local ZOV = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

function ZOV:Create(config)
    local GUI = {
        Tabs = {},
        CurrentTab = nil,
        Visible = true,
        FirstTab = nil
    }
    
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "ZOV"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = game:GetService("CoreGui")
    
    local TabBar = Instance.new("Frame")
    TabBar.Name = "TabBar"
    TabBar.Size = UDim2.new(0, 60, 0, 0)
    TabBar.Position = UDim2.new(1, -70, 0.5, 0)
    TabBar.AnchorPoint = Vector2.new(0, 0.5)
    TabBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TabBar.BorderSizePixel = 0
    TabBar.Parent = ScreenGui
    
    local TabBarCorner = Instance.new("UICorner")
    TabBarCorner.CornerRadius = UDim.new(0, 10)
    TabBarCorner.Parent = TabBar
    
    local TabLayout = Instance.new("UIListLayout")
    TabLayout.Padding = UDim.new(0, 5)
    TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabLayout.Parent = TabBar
    
    local TabPadding = Instance.new("UIPadding")
    TabPadding.PaddingTop = UDim.new(0, 5)
    TabPadding.PaddingBottom = UDim.new(0, 5)
    TabPadding.Parent = TabBar
    
    UserInputService.InputBegan:Connect(function(input, gpe)
        if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
            GUI.Visible = not GUI.Visible
            ScreenGui.Enabled = GUI.Visible
        end
    end)
    
    function GUI:AddTab(name, icon)
        local Tab = {
            Name = name,
            Elements = {}
        }
        
        local TabButton = Instance.new("ImageButton")
        TabButton.Name = name
        TabButton.Size = UDim2.new(0, 50, 0, 50)
        TabButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TabButton.Image = icon or ""
        TabButton.ImageColor3 = Color3.fromRGB(200, 200, 200)
        TabButton.Parent = TabBar
        
        local TabButtonCorner = Instance.new("UICorner")
        TabButtonCorner.CornerRadius = UDim.new(0, 8)
        TabButtonCorner.Parent = TabButton
        
        local TabFrame = Instance.new("Frame")
        TabFrame.Name = name .. "Frame"
        TabFrame.Size = UDim2.new(0, 450, 0, 550)
        TabFrame.Position = UDim2.new(1, -540, 0.5, -275)
        TabFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        TabFrame.BorderSizePixel = 0
        TabFrame.Visible = false
        TabFrame.Parent = ScreenGui
        
        local FrameCorner = Instance.new("UICorner")
        FrameCorner.CornerRadius = UDim.new(0, 12)
        FrameCorner.Parent = TabFrame
        
        local TopBar = Instance.new("Frame")
        TopBar.Size = UDim2.new(1, 0, 0, 50)
        TopBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TopBar.BorderSizePixel = 0
        TopBar.Parent = TabFrame
        
        local TopCorner = Instance.new("UICorner")
        TopCorner.CornerRadius = UDim.new(0, 12)
        TopCorner.Parent = TopBar
        
        local TopFix = Instance.new("Frame")
        TopFix.Size = UDim2.new(1, 0, 0, 10)
        TopFix.Position = UDim2.new(0, 0, 1, -10)
        TopFix.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TopFix.BorderSizePixel = 0
        TopFix.Parent = TopBar
        
        local Title = Instance.new("TextLabel")
        Title.Size = UDim2.new(1, -20, 1, 0)
        Title.Position = UDim2.new(0, 20, 0, 0)
        Title.BackgroundTransparency = 1
        Title.Text = name
        Title.TextColor3 = Color3.fromRGB(255, 255, 255)
        Title.TextSize = 20
        Title.Font = Enum.Font.GothamBold
        Title.TextXAlignment = Enum.TextXAlignment.Left
        Title.Parent = TopBar
        
        local Container = Instance.new("ScrollingFrame")
        Container.Size = UDim2.new(1, -20, 1, -70)
        Container.Position = UDim2.new(0, 10, 0, 60)
        Container.BackgroundTransparency = 1
        Container.BorderSizePixel = 0
        Container.ScrollBarThickness = 3
        Container.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
        Container.Parent = TabFrame
        
        local ContainerLayout = Instance.new("UIListLayout")
        ContainerLayout.Padding = UDim.new(0, 10)
        ContainerLayout.Parent = Container
        
        TabButton.MouseButton1Click:Connect(function()
            if GUI.CurrentTab and GUI.CurrentTab ~= Tab then
                GUI.CurrentTab.Frame.Visible = false
                GUI.CurrentTab.Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            end
            TabFrame.Visible = not TabFrame.Visible
            TabButton.BackgroundColor3 = TabFrame.Visible and Color3.fromRGB(50, 50, 50) or Color3.fromRGB(30, 30, 30)
            GUI.CurrentTab = TabFrame.Visible and Tab or nil
        end)
        
        Tab.Frame = TabFrame
        Tab.Container = Container
        Tab.Button = TabButton
        
        function Tab:Toggle(name, default, callback)
            local Toggle = Instance.new("Frame")
            Toggle.Size = UDim2.new(1, 0, 0, 40)
            Toggle.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            Toggle.BorderSizePixel = 0
            Toggle.Parent = Container
            
            local ToggleCorner = Instance.new("UICorner")
            ToggleCorner.CornerRadius = UDim.new(0, 8)
            ToggleCorner.Parent = Toggle
            
            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(1, -60, 1, 0)
            Label.Position = UDim2.new(0, 15, 0, 0)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 15
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = Toggle
            
            local Switch = Instance.new("Frame")
            Switch.Size = UDim2.new(0, 45, 0, 24)
            Switch.Position = UDim2.new(1, -55, 0.5, -12)
            Switch.BackgroundColor3 = default and Color3.fromRGB(60, 180, 60) or Color3.fromRGB(50, 50, 50)
            Switch.BorderSizePixel = 0
            Switch.Parent = Toggle
            
            local SwitchCorner = Instance.new("UICorner")
            SwitchCorner.CornerRadius = UDim.new(1, 0)
            SwitchCorner.Parent = Switch
            
            local Circle = Instance.new("Frame")
            Circle.Size = UDim2.new(0, 18, 0, 18)
            Circle.Position = default and UDim2.new(1, -21, 0.5, -9) or UDim2.new(0, 3, 0.5, -9)
            Circle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Circle.BorderSizePixel = 0
            Circle.Parent = Switch
            
            local CircleCorner = Instance.new("UICorner")
            CircleCorner.CornerRadius = UDim.new(1, 0)
            CircleCorner.Parent = Circle
            
            local toggled = default
            
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, 0, 1, 0)
            Button.BackgroundTransparency = 1
            Button.Text = ""
            Button.Parent = Toggle
            
            Button.MouseButton1Click:Connect(function()
                toggled = not toggled
                TweenService:Create(Switch, TweenInfo.new(0.2), {BackgroundColor3 = toggled and Color3.fromRGB(60, 180, 60) or Color3.fromRGB(50, 50, 50)}):Play()
                TweenService:Create(Circle, TweenInfo.new(0.2), {Position = toggled and UDim2.new(1, -21, 0.5, -9) or UDim2.new(0, 3, 0.5, -9)}):Play()
                if callback then callback(toggled) end
            end)
        end
        
        function Tab:Button(name, callback)
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, 0, 0, 40)
            Button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            Button.Text = name
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 15
            Button.Font = Enum.Font.Gotham
            Button.Parent = Container
            
            local ButtonCorner = Instance.new("UICorner")
            ButtonCorner.CornerRadius = UDim.new(0, 8)
            ButtonCorner.Parent = Button
            
            Button.MouseButton1Click:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
                task.wait(0.1)
                TweenService:Create(Button, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(35, 35, 35)}):Play()
                if callback then callback() end
            end)
        end
        
        function Tab:Slider(name, min, max, default, callback)
            local Slider = Instance.new("Frame")
            Slider.Size = UDim2.new(1, 0, 0, 60)
            Slider.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            Slider.BorderSizePixel = 0
            Slider.Parent = Container
            
            local SliderCorner = Instance.new("UICorner")
            SliderCorner.CornerRadius = UDim.new(0, 8)
            SliderCorner.Parent = Slider
            
            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(1, -20, 0, 25)
            Label.Position = UDim2.new(0, 15, 0, 8)
            Label.BackgroundTransparency = 1
            Label.Text = name .. ": " .. default
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 15
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = Slider
            
            local Track = Instance.new("Frame")
            Track.Size = UDim2.new(1, -30, 0, 4)
            Track.Position = UDim2.new(0, 15, 1, -18)
            Track.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            Track.BorderSizePixel = 0
            Track.Parent = Slider
            
            local TrackCorner = Instance.new("UICorner")
            TrackCorner.CornerRadius = UDim.new(1, 0)
            TrackCorner.Parent = Track
            
            local Fill = Instance.new("Frame")
            Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
            Fill.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
            Fill.BorderSizePixel = 0
            Fill.Parent = Track
            
            local FillCorner = Instance.new("UICorner")
            FillCorner.CornerRadius = UDim.new(1, 0)
            FillCorner.Parent = Fill
            
            local dragging = false
            Track.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
            end)
            
            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
            end)
            
            UserInputService.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local percent = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
                    local value = math.floor(min + (max - min) * percent)
                    Fill.Size = UDim2.new(percent, 0, 1, 0)
                    Label.Text = name .. ": " .. value
                    if callback then callback(value) end
                end
            end)
        end
        
        function Tab:Dropdown(name, options, callback)
            local Dropdown = Instance.new("Frame")
            Dropdown.Size = UDim2.new(1, 0, 0, 40)
            Dropdown.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            Dropdown.BorderSizePixel = 0
            Dropdown.Parent = Container
            Dropdown.ClipsDescendants = true
            
            local DropdownCorner = Instance.new("UICorner")
            DropdownCorner.CornerRadius = UDim.new(0, 8)
            DropdownCorner.Parent = Dropdown
            
            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(1, -40, 0, 40)
            Label.Position = UDim2.new(0, 15, 0, 0)
            Label.BackgroundTransparency = 1
            Label.Text = name .. ": " .. (options[1] or "None")
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 15
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = Dropdown
            
            local Arrow = Instance.new("TextLabel")
            Arrow.Size = UDim2.new(0, 20, 0, 40)
            Arrow.Position = UDim2.new(1, -30, 0, 0)
            Arrow.BackgroundTransparency = 1
            Arrow.Text = "▼"
            Arrow.TextColor3 = Color3.fromRGB(200, 200, 200)
            Arrow.TextSize = 12
            Arrow.Font = Enum.Font.Gotham
            Arrow.Parent = Dropdown
            
            local OptionsList = Instance.new("Frame")
            OptionsList.Size = UDim2.new(1, 0, 0, 0)
            OptionsList.Position = UDim2.new(0, 0, 0, 40)
            OptionsList.BackgroundTransparency = 1
            OptionsList.Parent = Dropdown
            
            local OptionsLayout = Instance.new("UIListLayout")
            OptionsLayout.Parent = OptionsList
            
            local expanded = false
            
            for _, option in ipairs(options) do
                local OptionButton = Instance.new("TextButton")
                OptionButton.Size = UDim2.new(1, 0, 0, 35)
                OptionButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                OptionButton.Text = option
                OptionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                OptionButton.TextSize = 14
                OptionButton.Font = Enum.Font.Gotham
                OptionButton.BorderSizePixel = 0
                OptionButton.Parent = OptionsList
                
                OptionButton.MouseButton1Click:Connect(function()
                    Label.Text = name .. ": " .. option
                    expanded = false
                    TweenService:Create(Dropdown, TweenInfo.new(0.2), {Size = UDim2.new(1, 0, 0, 40)}):Play()
                    Arrow.Text = "▼"
                    if callback then callback(option) end
                end)
            end
            
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, 0, 0, 40)
            Button.BackgroundTransparency = 1
            Button.Text = ""
            Button.ZIndex = 2
            Button.Parent = Dropdown
            
            Button.MouseButton1Click:Connect(function()
                expanded = not expanded
                local newSize = expanded and (40 + #options * 35) or 40
                TweenService:Create(Dropdown, TweenInfo.new(0.2), {Size = UDim2.new(1, 0, 0, newSize)}):Play()
                Arrow.Text = expanded and "▲" or "▼"
            end)
        end
        
        table.insert(GUI.Tabs, Tab)
        
        if not GUI.FirstTab then
            GUI.FirstTab = Tab
            task.wait(0.1)
            TabFrame.Visible = true
            TabButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            GUI.CurrentTab = Tab
        end
        
        return Tab
    end
    
    return GUI
end

return ZOV
